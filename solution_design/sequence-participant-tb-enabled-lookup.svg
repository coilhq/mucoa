<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="676.8px" preserveAspectRatio="none" style="width:912px;height:676px;background:#FFFFFF;" version="1.1" viewBox="0 0 912 676" width="912px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFF9" height="661.6063" style="stroke:#181818;stroke-width:0.4000000000000001;" width="322.8" x="124" y="4.8"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="76" x="245.8" y="15.5961">Central-Ledger</text><rect fill="#F9FFF9" height="661.6063" style="stroke:#181818;stroke-width:0.4000000000000001;" width="362" x="540.8" y="4.8"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="40" x="700.2" y="15.5961">Storage</text><rect height="345.3" style="stroke:#000000;stroke-width:1.2000000000000002;fill:none;" width="899.6" x="8" y="254.2188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="65.6" x2="65.6" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="158.4" x2="158.4" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="252.4" x2="252.4" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="370.8" x2="370.8" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="594.4" x2="594.4" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="752.4" x2="752.4" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="837.2" x2="837.2" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="882.8" x2="882.8" y1="71.9688" y2="613.1188"/><rect fill="#B0D5FF" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="100" x="16" y="45.8813"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="88.8" x="21.6" y="63.1078">Mojaloop Adapter</text><rect fill="#B0D5FF" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="100" x="16" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="88.8" x="21.6" y="629.5453">Mojaloop Adapter</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="63.2" x="127.2" y="31.7938"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="144.4" y="49.0203">Kafka</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="52" x="132.8" y="63.1078">Consumer</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="63.2" x="127.2" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="144.4" y="629.5453">Kafka</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="52" x="132.8" y="643.6328">Consumer</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="75.2" x="214.8" y="45.8813"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" text-decoration="underline" textLength="15.2" x="220.4" y="63.1078">api</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="45.6" x="238.8" y="63.1078">/ Handler</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="75.2" x="214.8" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" text-decoration="underline" textLength="15.2" x="220.4" y="629.5453">api</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="45.6" x="238.8" y="629.5453">/ Handler</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="145.6" x="298" y="31.7938"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="87.2" x="327.2" y="49.0203">Application Layer</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="134.4" x="303.6" y="63.1078">(domain / service / facade)</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="145.6" x="298" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="87.2" x="327.2" y="629.5453">Application Layer</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="134.4" x="303.6" y="643.6328">(domain / service / facade)</text><rect fill="#D5E8D4" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="101.6" x="544" y="45.8813"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="90.4" x="549.6" y="63.1078">TigerBeetle Client</text><rect fill="#D5E8D4" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="101.6" x="544" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="90.4" x="549.6" y="629.5453">TigerBeetle Client</text><rect fill="#D5E8D4" height="25.2875" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108.8" x="699.6" y="42.6813"/><rect fill="#D5E8D4" height="25.2875" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108.8" x="696.4" y="45.8813"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="97.6" x="702" y="63.1078">TigerBeetle Cluster</text><rect fill="#D5E8D4" height="25.2875" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108.8" x="699.6" y="612.3188"/><rect fill="#D5E8D4" height="25.2875" style="stroke:#181818;stroke-width:0.4000000000000001;" width="108.8" x="696.4" y="615.5188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="97.6" x="702" y="632.7453">TigerBeetle Cluster</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="36.8" x="816.4" y="69.5078">MySQL</text><path d="M822.8,29.0813 C822.8,21.0813 837.2,21.0813 837.2,21.0813 C837.2,21.0813 851.6,21.0813 851.6,29.0813 L851.6,49.8813 C851.6,57.8813 837.2,57.8813 837.2,57.8813 C837.2,57.8813 822.8,57.8813 822.8,49.8813 L822.8,29.0813 " fill="#DAE8FC" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M822.8,29.0813 C822.8,37.0813 837.2,37.0813 837.2,37.0813 C837.2,37.0813 851.6,37.0813 851.6,29.0813 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="36.8" x="816.4" y="623.9453">MySQL</text><path d="M822.8,634.4063 C822.8,626.4063 837.2,626.4063 837.2,626.4063 C837.2,626.4063 851.6,626.4063 851.6,634.4063 L851.6,655.2063 C851.6,663.2063 837.2,663.2063 837.2,663.2063 C837.2,663.2063 822.8,663.2063 822.8,655.2063 L822.8,634.4063 " fill="#DAE8FC" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M822.8,634.4063 C822.8,642.4063 837.2,642.4063 837.2,642.4063 C837.2,642.4063 851.6,642.4063 851.6,634.4063 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="866" y="69.5078">Redis</text><path d="M868.4,29.0813 C868.4,21.0813 882.8,21.0813 882.8,21.0813 C882.8,21.0813 897.2,21.0813 897.2,29.0813 L897.2,49.8813 C897.2,57.8813 882.8,57.8813 882.8,57.8813 C882.8,57.8813 868.4,57.8813 868.4,49.8813 L868.4,29.0813 " fill="#E1D5E7" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M868.4,29.0813 C868.4,37.0813 882.8,37.0813 882.8,37.0813 C882.8,37.0813 897.2,37.0813 897.2,29.0813 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="866" y="623.9453">Redis</text><path d="M868.4,634.4063 C868.4,626.4063 882.8,626.4063 882.8,626.4063 C882.8,626.4063 897.2,626.4063 897.2,634.4063 L897.2,655.2063 C897.2,663.2063 882.8,663.2063 882.8,663.2063 C882.8,663.2063 868.4,663.2063 868.4,655.2063 L868.4,634.4063 " fill="#E1D5E7" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M868.4,634.4063 C868.4,642.4063 882.8,642.4063 882.8,642.4063 C882.8,642.4063 897.2,642.4063 897.2,634.4063 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M15.2,83.9688 L15.2,117.5688 L116.8,117.5688 L116.8,91.9688 L108.8,83.9688 L15.2,83.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M108.8,83.9688 L108.8,91.9688 L116.8,91.9688 L108.8,83.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="49.6" x="20" y="98.7648">Participant</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="84.8" x="20" y="111.8461">DFSP interactions</text><path d="M91.2,126.1313 L91.2,159.7313 L226.4,159.7313 L226.4,134.1313 L218.4,126.1313 L91.2,126.1313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M218.4,126.1313 L218.4,134.1313 L226.4,134.1313 L218.4,126.1313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="74.4" x="96" y="140.9273">Consume JSON</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="118.4" x="96" y="154.0086">requests from Kafka topic</text><path d="M184.8,168.2938 L184.8,201.8938 L319.2,201.8938 L319.2,176.2938 L311.2,168.2938 L184.8,168.2938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M311.2,168.2938 L311.2,176.2938 L319.2,176.2938 L311.2,168.2938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="117.6" x="189.6" y="183.0898">JSON request decoded &amp;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="100" x="189.6" y="196.1711">processed via handler</text><path d="M296,210.4563 L296,244.0563 L445.6,244.0563 L445.6,218.4563 L437.6,210.4563 L296,210.4563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M437.6,210.4563 L437.6,218.4563 L445.6,218.4563 L437.6,210.4563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="125.6" x="300.8" y="225.2523">Expose service functions &amp;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="132.8" x="300.8" y="238.3336">handle database interactions</text><path d="M8,254.2188 L188,254.2188 L188,260.9 L180,268.9 L8,268.9 L8,254.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.2000000000000002;"/><rect fill="none" height="345.3" style="stroke:#000000;stroke-width:1.2000000000000002;" width="899.6" x="8" y="254.2188"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="144" x="20" y="265.8148">Lookup Participant by Name</text><polygon fill="#181818" points="149.2,296.6625,157.2,299.8625,149.2,303.0625,152.4,299.8625" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="66" x2="154" y1="299.8625" y2="299.8625"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="71.6" y="289.4367">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="28" x="80.4" y="282.8961">JSON</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="108.4" y="282.8961"> </text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="35.2" x="80.4" y="295.9773">(name)</text><polygon fill="#181818" points="242.8,320.9438,250.8,324.1438,242.8,327.3438,246,324.1438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="158.8" x2="247.6" y1="324.1438" y2="324.1438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="164.4" y="320.2586">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="65.6" x="173.2" y="320.2586">Invoke handler</text><polygon fill="#181818" points="361.2,345.225,369.2,348.425,361.2,351.625,364.4,348.425" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="252.4" x2="366" y1="348.425" y2="348.425"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="258" y="344.5398">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="64" x="266.8" y="344.5398">Invoke service</text><polygon fill="#181818" points="379.6,369.5063,371.6,372.7063,379.6,375.9063,376.4,372.7063" style="stroke:#181818;stroke-width:0.8000000000000002;"/><polygon fill="#181818" points="873.2,369.5063,881.2,372.7063,873.2,375.9063,876.4,372.7063" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="374.8" x2="878" y1="372.7063" y2="372.7063"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="384.4" y="368.8211">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="164" x="393.2" y="368.8211">Lookup Participant data from cache</text><polygon fill="#181818" points="379.6,406.8688,371.6,410.0688,379.6,413.2688,376.4,410.0688" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="374.8" x2="836.4" y1="410.0688" y2="410.0688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="161.6" x="384.4" y="393.1023">If Participant data not cached, then</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="148" x="384.4" y="406.1836">retrieve from SQL (this excludes</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="36.8" x="535.6" y="406.1836">account</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="23.2" x="575.6" y="406.1836">data)</text><polygon fill="#181818" points="873.2,444.2313,881.2,447.4313,873.2,450.6313,876.4,447.4313" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="370.8" x2="878" y1="447.4313" y2="447.4313"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="111.2" x="376.4" y="430.4648">If not previously cached,</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="127.2" x="376.4" y="443.5461">then cache Participant data</text><polygon fill="#181818" points="585.2,468.5125,593.2,471.7125,585.2,474.9125,588.4,471.7125" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="370.8" x2="590" y1="471.7125" y2="471.7125"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="376.4" y="467.8273">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="28.8" x="385.2" y="467.8273">Invoke</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="36.8" x="417.2" y="467.8273">account</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="124" x="457.2" y="467.8273">lookup using Participant ID</text><polygon fill="#181818" points="603.6,492.7938,595.6,495.9938,603.6,499.1938,600.4,495.9938" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="598.8" x2="751.6" y1="495.9938" y2="495.9938"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="608.4" y="492.1086">6</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="89.6" x="617.2" y="492.1086">Retrieve Participant</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="36.8" x="710" y="492.1086">account</text><polygon fill="#181818" points="379.6,517.075,371.6,520.275,379.6,523.475,376.4,520.275" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="374.8" x2="594" y1="520.275" y2="520.275"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="384.4" y="516.3898">7</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="83.2" x="393.2" y="516.3898">Return Participant</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="36.8" x="479.6" y="516.3898">account</text><polygon fill="#181818" points="261.2,541.3563,253.2,544.5563,261.2,547.7563,258,544.5563" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="256.4" x2="370" y1="544.5563" y2="544.5563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="266" y="540.6711">8</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="59.2" x="274.8" y="540.6711">Return result</text><polygon fill="#181818" points="167.6,565.6375,159.6,568.8375,167.6,572.0375,164.4,568.8375" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="162.8" x2="251.6" y1="568.8375" y2="568.8375"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="172.4" y="564.9523">9</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="59.2" x="181.2" y="564.9523">Return result</text><polygon fill="#181818" points="74.8,589.9188,66.8,593.1188,74.8,596.3188,71.6,593.1188" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="70" x2="158" y1="593.1188" y2="593.1188"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="79.6" y="589.2336">10</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="59.2" x="94" y="589.2336">Return result</text><!--MD5=[b6b7437aa8d9a03f03c03c8da5ab3b02]
@startuml

participant "Mojaloop Adapter" as dfsp #B0D5FF
note over dfsp
    Participant
    DFSP interactions
end note

box Central-Ledger #FFFFF9
    participant "Kafka\nConsumer" as cl_consume_kafka
        participant "__api__ / Handler" as cl_handler
        participant "Application Layer\n(domain / service / facade)" as cl_domain

        note over cl_consume_kafka
            Consume JSON
            requests from Kafka topic
        end note
    
        note over cl_handler
            JSON request decoded &
            processed via handler
        end note
    
        note over cl_domain
            Expose service functions &
            handle database interactions
        end note
end box

box Storage #F9FFF9
	Participant "TigerBeetle Client" as tb_client #D5E8D4
    collections "TigerBeetle Cluster" as tb_nodes #D5E8D4
	database "MySQL" as cl_db #DAE8FC
	database "Redis" as redis_cache #E1D5E7
end box

autonumber
group Lookup Participant by Name
    dfsp -> cl_consume_kafka : //JSON// \n**(name)**
    cl_consume_kafka -> cl_handler : Invoke handler
    cl_handler -> cl_domain : Invoke service
    cl_domain <- -> redis_cache : Lookup Participant data from cache
    autonumber stop
    cl_domain <- - cl_db : If Participant data not cached, then \nretrieve from SQL (this excludes //account// data)
    cl_domain -> redis_cache : If not previously cached, \nthen cache Participant data
    autonumber resume
    cl_domain -> tb_client : Invoke //account// lookup using Participant ID
    tb_client <- - tb_nodes : Retrieve Participant //account//
    tb_client - -> cl_domain : Return Participant //account//
    cl_domain - -> cl_handler : Return result
    cl_handler - -> cl_consume_kafka : Return result
    cl_consume_kafka - -> dfsp : Return result
end

@enduml

PlantUML version 1.2022.4(Sat Apr 09 15:29:17 CAT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: ZA
--></g></svg>