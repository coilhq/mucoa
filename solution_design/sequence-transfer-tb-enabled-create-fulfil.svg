<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="676.8px" preserveAspectRatio="none" style="width:859px;height:676px;background:#FFFFFF;" version="1.1" viewBox="0 0 859 676" width="859.2px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFF9" height="661.6063" style="stroke:#181818;stroke-width:0.4000000000000001;" width="339.6" x="143.2" y="4.8"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="76" x="273.4" y="15.5961">Central-Ledger</text><rect fill="#F9FFF9" height="661.6063" style="stroke:#181818;stroke-width:0.4000000000000001;" width="312.8" x="538.4" y="4.8"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="40" x="673.2" y="15.5961">Storage</text><rect height="345.3" style="stroke:#000000;stroke-width:1.2000000000000002;fill:none;" width="796" x="18.4" y="254.2188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="54.4" x2="54.4" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="177.6" x2="177.6" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="271.6" x2="271.6" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="406.8" x2="406.8" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="576" x2="576" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="720" x2="720" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="785.6" x2="785.6" y1="71.9688" y2="613.1188"/><line style="stroke:#181818;stroke-width:0.4000000000000001;fill:none;stroke-dasharray:5.0,5.0;" x1="831.2" x2="831.2" y1="71.9688" y2="613.1188"/><rect fill="#B0D5FF" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="56.8" x="26.4" y="31.7938"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="45.6" x="32" y="49.0203">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="40" x="34.8" y="63.1078">Adapter</text><rect fill="#B0D5FF" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="56.8" x="26.4" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="45.6" x="32" y="629.5453">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="40" x="34.8" y="643.6328">Adapter</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="63.2" x="146.4" y="31.7938"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="163.6" y="49.0203">Kafka</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="52" x="152" y="63.1078">Consumer</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="63.2" x="146.4" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="163.6" y="629.5453">Kafka</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="52" x="152" y="643.6328">Consumer</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="75.2" x="234" y="45.8813"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" text-decoration="underline" textLength="15.2" x="239.6" y="63.1078">api</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="45.6" x="258" y="63.1078">/ Handler</text><rect fill="#E2E2F0" height="25.2875" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="75.2" x="234" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" text-decoration="underline" textLength="15.2" x="239.6" y="629.5453">api</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="45.6" x="258" y="629.5453">/ Handler</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="145.6" x="334" y="31.7938"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="87.2" x="363.2" y="49.0203">Application Layer</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="134.4" x="339.6" y="63.1078">(domain / service / facade)</text><rect fill="#E2E2F0" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="145.6" x="334" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="87.2" x="363.2" y="629.5453">Application Layer</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="134.4" x="339.6" y="643.6328">(domain / service / facade)</text><rect fill="#D5E8D4" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="69.6" x="541.6" y="31.7938"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="58.4" x="547.2" y="49.0203">TigerBeetle</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="562" y="63.1078">Client</text><rect fill="#D5E8D4" height="39.375" rx="2" ry="2" style="stroke:#181818;stroke-width:0.4000000000000001;" width="69.6" x="541.6" y="612.3188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="58.4" x="547.2" y="629.5453">TigerBeetle</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="562" y="643.6328">Client</text><rect fill="#D5E8D4" height="39.375" style="stroke:#181818;stroke-width:0.4000000000000001;" width="69.6" x="687.2" y="28.5938"/><rect fill="#D5E8D4" height="39.375" style="stroke:#181818;stroke-width:0.4000000000000001;" width="69.6" x="684" y="31.7938"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="58.4" x="689.6" y="49.0203">TigerBeetle</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="36" x="700.8" y="63.1078">Cluster</text><rect fill="#D5E8D4" height="39.375" style="stroke:#181818;stroke-width:0.4000000000000001;" width="69.6" x="687.2" y="612.3188"/><rect fill="#D5E8D4" height="39.375" style="stroke:#181818;stroke-width:0.4000000000000001;" width="69.6" x="684" y="615.5188"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="58.4" x="689.6" y="632.7453">TigerBeetle</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="36" x="700.8" y="646.8328">Cluster</text><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="36.8" x="764.8" y="69.5078">MySQL</text><path d="M771.2,29.0813 C771.2,21.0813 785.6,21.0813 785.6,21.0813 C785.6,21.0813 800,21.0813 800,29.0813 L800,49.8813 C800,57.8813 785.6,57.8813 785.6,57.8813 C785.6,57.8813 771.2,57.8813 771.2,49.8813 L771.2,29.0813 " fill="#DAE8FC" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M771.2,29.0813 C771.2,37.0813 785.6,37.0813 785.6,37.0813 C785.6,37.0813 800,37.0813 800,29.0813 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="36.8" x="764.8" y="623.9453">MySQL</text><path d="M771.2,634.4063 C771.2,626.4063 785.6,626.4063 785.6,626.4063 C785.6,626.4063 800,626.4063 800,634.4063 L800,655.2063 C800,663.2063 785.6,663.2063 785.6,663.2063 C785.6,663.2063 771.2,663.2063 771.2,655.2063 L771.2,634.4063 " fill="#DAE8FC" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M771.2,634.4063 C771.2,642.4063 785.6,642.4063 785.6,642.4063 C785.6,642.4063 800,642.4063 800,634.4063 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="814.4" y="69.5078">Redis</text><path d="M816.8,29.0813 C816.8,21.0813 831.2,21.0813 831.2,21.0813 C831.2,21.0813 845.6,21.0813 845.6,29.0813 L845.6,49.8813 C845.6,57.8813 831.2,57.8813 831.2,57.8813 C831.2,57.8813 816.8,57.8813 816.8,49.8813 L816.8,29.0813 " fill="#E1D5E7" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M816.8,29.0813 C816.8,37.0813 831.2,37.0813 831.2,37.0813 C831.2,37.0813 845.6,37.0813 845.6,29.0813 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="11.2" lengthAdjust="spacing" textLength="28.8" x="814.4" y="623.9453">Redis</text><path d="M816.8,634.4063 C816.8,626.4063 831.2,626.4063 831.2,626.4063 C831.2,626.4063 845.6,626.4063 845.6,634.4063 L845.6,655.2063 C845.6,663.2063 831.2,663.2063 831.2,663.2063 C831.2,663.2063 816.8,663.2063 816.8,655.2063 L816.8,634.4063 " fill="#E1D5E7" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M816.8,634.4063 C816.8,642.4063 831.2,642.4063 831.2,642.4063 C831.2,642.4063 845.6,642.4063 845.6,634.4063 " fill="none" style="stroke:#181818;stroke-width:1.2000000000000002;"/><path d="M4,83.9688 L4,117.5688 L105.6,117.5688 L105.6,91.9688 L97.6,83.9688 L4,83.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M97.6,83.9688 L97.6,91.9688 L105.6,91.9688 L97.6,83.9688 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="49.6" x="8.8" y="98.7648">Participant</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="84.8" x="8.8" y="111.8461">DFSP interactions</text><path d="M110.4,126.1313 L110.4,159.7313 L245.6,159.7313 L245.6,134.1313 L237.6,126.1313 L110.4,126.1313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M237.6,126.1313 L237.6,134.1313 L245.6,134.1313 L237.6,126.1313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="74.4" x="115.2" y="140.9273">Consume JSON</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="118.4" x="115.2" y="154.0086">requests from Kafka topic</text><path d="M204,168.2938 L204,201.8938 L338.4,201.8938 L338.4,176.2938 L330.4,168.2938 L204,168.2938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M330.4,168.2938 L330.4,176.2938 L338.4,176.2938 L330.4,168.2938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="117.6" x="208.8" y="183.0898">JSON request decoded &amp;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="100" x="208.8" y="196.1711">processed via handler</text><path d="M332,210.4563 L332,244.0563 L481.6,244.0563 L481.6,218.4563 L473.6,210.4563 L332,210.4563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><path d="M473.6,210.4563 L473.6,218.4563 L481.6,218.4563 L473.6,210.4563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="125.6" x="336.8" y="225.2523">Expose service functions &amp;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="132.8" x="336.8" y="238.3336">handle database interactions</text><path d="M18.4,254.2188 L182.4,254.2188 L182.4,260.9 L174.4,268.9 L18.4,268.9 L18.4,254.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.2000000000000002;"/><rect fill="none" height="345.3" style="stroke:#000000;stroke-width:1.2000000000000002;" width="796" x="18.4" y="254.2188"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="128" x="30.4" y="265.8148">Create Transfer (2-Phase)</text><rect fill="#EEEEEE" height="2.4" style="stroke:#EEEEEE;stroke-width:0.8000000000000002;" width="852" x="0" y="285.8406"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="852" y1="285.8406" y2="285.8406"/><line style="stroke:#000000;stroke-width:0.8000000000000002;" x1="0" x2="852" y1="288.2406" y2="288.2406"/><rect fill="#EEEEEE" height="19.4813" style="stroke:#000000;stroke-width:1.6000000000000003;" width="84.8" x="383.6" y="276.9"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="70.4" x="388.4" y="290.8961">Fulfil Transfer</text><polygon fill="#181818" points="168.4,332.1438,176.4,335.3438,168.4,338.5438,171.6,335.3438" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="54.8" x2="173.2" y1="335.3438" y2="335.3438"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="60.4" y="324.918">1</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="28" x="69.2" y="318.3773">JSON</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="97.2" y="318.3773"> </text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="69.2" y="331.4586">(</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="38.4" x="72.4" y="331.4586">transfer</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="50.4" x="114" y="331.4586">- fulfil data)</text><polygon fill="#181818" points="262,356.425,270,359.625,262,362.825,265.2,359.625" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="178" x2="266.8" y1="359.625" y2="359.625"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="183.6" y="355.7398">2</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="65.6" x="192.4" y="355.7398">Invoke handler</text><polygon fill="#181818" points="397.2,380.7063,405.2,383.9063,397.2,387.1063,400.4,383.9063" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="271.6" x2="402" y1="383.9063" y2="383.9063"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="277.2" y="380.0211">3</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="107.2" x="286" y="380.0211">Invoke application layer</text><polygon fill="#181818" points="415.6,418.0688,407.6,421.2688,415.6,424.4688,412.4,421.2688" style="stroke:#181818;stroke-width:0.8000000000000002;"/><polygon fill="#181818" points="776,418.0688,784,421.2688,776,424.4688,779.2,421.2688" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="410.8" x2="780.8" y1="421.2688" y2="421.2688"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="420.4" y="410.843">4</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.4" x="429.2" y="404.3023">Create</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="35.2" x="462.8" y="404.3023">transfer</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="53.6" x="501.2" y="404.3023">fulfillment &amp;</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="142.4" x="429.2" y="417.3836">obtain open settlement window</text><polygon fill="#181818" points="566.8,442.35,574.8,445.55,566.8,448.75,570,445.55" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="406.8" x2="571.6" y1="445.55" y2="445.55"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="412.4" y="441.6648">5</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="78.4" x="421.2" y="441.6648">Post the pending</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="35.2" x="502.8" y="441.6648">transfer</text><polygon fill="#181818" points="710.8,479.7125,718.8,482.9125,710.8,486.1125,714,482.9125" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;" x1="576.4" x2="715.6" y1="482.9125" y2="482.9125"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="582" y="472.4867">6</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="60.8" x="590.8" y="465.9461">Fulfil pending</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="35.2" x="654.8" y="465.9461">transfer</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="3.2" x="690" y="465.9461"> </text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="116" x="590.8" y="479.0273">(update status to posted)</text><polygon fill="#181818" points="415.6,503.9938,407.6,507.1938,415.6,510.3938,412.4,507.1938" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="410.8" x2="575.6" y1="507.1938" y2="507.1938"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="420.4" y="503.3086">7</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="30.4" x="429.2" y="503.3086">Return</text><text fill="#000000" font-family="sans-serif" font-size="10.4" font-style="italic" lengthAdjust="spacing" textLength="35.2" x="462.8" y="503.3086">transfer</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="69.6" x="501.2" y="503.3086">fulfilment result</text><polygon fill="#181818" points="280.4,528.275,272.4,531.475,280.4,534.675,277.2,531.475" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="275.6" x2="406" y1="531.475" y2="531.475"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="285.2" y="527.5898">8</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="59.2" x="294" y="527.5898">Return result</text><polygon fill="#181818" points="186.8,552.5563,178.8,555.7563,186.8,558.9563,183.6,555.7563" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="182" x2="270.8" y1="555.7563" y2="555.7563"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="191.6" y="551.8711">9</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="59.2" x="200.4" y="551.8711">Return result</text><polygon fill="#181818" points="63.6,589.9188,55.6,593.1188,63.6,596.3188,60.4,593.1188" style="stroke:#181818;stroke-width:0.8000000000000002;"/><line style="stroke:#181818;stroke-width:0.8000000000000002;stroke-dasharray:2.0,2.0;" x1="58.8" x2="177.2" y1="593.1188" y2="593.1188"/><text fill="#000000" font-family="sans-serif" font-size="10.4" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="68.4" y="582.693">10</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="68" x="82.8" y="576.1523">Return transfer</text><text fill="#000000" font-family="sans-serif" font-size="10.4" lengthAdjust="spacing" textLength="69.6" x="82.8" y="589.2336">fulfilment result</text><!--MD5=[9fe23dfb5b2aa626d5b58ffaa903a682]
@startuml

participant "Mojaloop\nAdapter" as dfsp #B0D5FF
note over dfsp
    Participant
    DFSP interactions
end note

box Central-Ledger #FFFFF9
    participant "Kafka\nConsumer" as cl_consume_kafka
    participant "__api__ / Handler" as cl_handler
    participant "Application Layer\n(domain / service / facade)" as cl_domain

        note over cl_consume_kafka
            Consume JSON
            requests from Kafka topic
        end note

        note over cl_handler
            JSON request decoded &
            processed via handler
        end note

        note over cl_domain
            Expose service functions &
            handle database interactions
        end note
end box

box Storage #F9FFF9
	participant "TigerBeetle\nClient" as tb_client #D5E8D4
	collections "TigerBeetle\nCluster" as tb_nodes #D5E8D4
	database "MySQL" as cl_db #DAE8FC
	database "Redis" as redis_cache #E1D5E7
end box

autonumber
group Create Transfer (2-Phase)
    == Fulfil Transfer ==
    dfsp -> cl_consume_kafka : //JSON// \n(**transfer** - fulfil data)
    cl_consume_kafka -> cl_handler : Invoke handler
    cl_handler -> cl_domain : Invoke application layer
    cl_domain <- -> cl_db : Create //transfer// fulfillment & \nobtain open settlement window
    cl_domain -> tb_client : Post the pending //transfer//
    tb_client -> tb_nodes : Fulfil pending //transfer// \n(update status to posted)
    tb_client - -> cl_domain : Return //transfer// fulfilment result
    cl_domain - -> cl_handler : Return result
    cl_handler - -> cl_consume_kafka : Return result
    cl_consume_kafka - -> dfsp : Return transfer \nfulfilment result
end

@enduml

PlantUML version 1.2022.4(Sat Apr 09 15:29:17 CAT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: ZA
--></g></svg>