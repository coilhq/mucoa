<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="785px" preserveAspectRatio="none" style="width:1031px;height:785px;background:#FFFFFF;" version="1.1" viewBox="0 0 1031 785" width="1031px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFF9" height="766.3047" style="stroke:#181818;stroke-width:0.5;" width="403.5" x="182" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95" x="334.25" y="19.4951">Central-Ledger</text><rect fill="#F9FFF9" height="766.3047" style="stroke:#181818;stroke-width:0.5;" width="399" x="622" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="50" x="794.5" y="19.4951">Storage</text><rect height="370.9219" style="stroke:#000000;stroke-width:1.5;fill:none;" width="965" x="10" y="317.7734"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="82" x2="82" y1="89.9609" y2="705.6953"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="225" x2="225" y1="89.9609" y2="705.6953"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="342.5" x2="342.5" y1="89.9609" y2="705.6953"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="490.5" x2="490.5" y1="89.9609" y2="705.6953"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="689" x2="689" y1="89.9609" y2="705.6953"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="833" x2="833" y1="89.9609" y2="705.6953"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="939" x2="939" y1="89.9609" y2="705.6953"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="996" x2="996" y1="89.9609" y2="705.6953"/><rect fill="#B0D5FF" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="20" y="57.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="27" y="78.8848">Mojaloop Adapter</text><rect fill="#B0D5FF" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="20" y="704.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="27" y="726.2285">Mojaloop Adapter</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="186" y="39.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="207.5" y="61.2754">Kafka</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="193" y="78.8848">Consumer</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="186" y="704.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="207.5" y="726.2285">Kafka</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="193" y="743.8379">Consumer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="295.5" y="57.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="19" x="302.5" y="78.8848">api</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="325.5" y="78.8848">/ Handler</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="295.5" y="704.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="19" x="302.5" y="726.2285">api</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="325.5" y="726.2285">/ Handler</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="399.5" y="39.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="436" y="61.2754">Application Layer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="406.5" y="78.8848">(domain / service / facade)</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182" x="399.5" y="704.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="436" y="726.2285">Application Layer</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="406.5" y="743.8379">(domain / service / facade)</text><rect fill="#D5E8D4" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="626" y="57.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="633" y="78.8848">TigerBeetle Client</text><rect fill="#D5E8D4" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="626" y="704.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="633" y="726.2285">TigerBeetle Client</text><rect fill="#D5E8D4" height="31.6094" style="stroke:#181818;stroke-width:0.5;" width="136" x="767" y="53.3516"/><rect fill="#D5E8D4" height="31.6094" style="stroke:#181818;stroke-width:0.5;" width="136" x="763" y="57.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="770" y="78.8848">TigerBeetle Cluster</text><rect fill="#D5E8D4" height="31.6094" style="stroke:#181818;stroke-width:0.5;" width="136" x="767" y="704.6953"/><rect fill="#D5E8D4" height="31.6094" style="stroke:#181818;stroke-width:0.5;" width="136" x="763" y="708.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="770" y="730.2285">TigerBeetle Cluster</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="913" y="86.8848">MySQL</text><path d="M921,36.3516 C921,26.3516 939,26.3516 939,26.3516 C939,26.3516 957,26.3516 957,36.3516 L957,62.3516 C957,72.3516 939,72.3516 939,72.3516 C939,72.3516 921,72.3516 921,62.3516 L921,36.3516 " fill="#DAE8FC" style="stroke:#181818;stroke-width:1.5;"/><path d="M921,36.3516 C921,46.3516 939,46.3516 939,46.3516 C939,46.3516 957,46.3516 957,36.3516 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="913" y="719.2285">MySQL</text><path d="M921,732.3047 C921,722.3047 939,722.3047 939,722.3047 C939,722.3047 957,722.3047 957,732.3047 L957,758.3047 C957,768.3047 939,768.3047 939,768.3047 C939,768.3047 921,768.3047 921,758.3047 L921,732.3047 " fill="#DAE8FC" style="stroke:#181818;stroke-width:1.5;"/><path d="M921,732.3047 C921,742.3047 939,742.3047 939,742.3047 C939,742.3047 957,742.3047 957,732.3047 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="975" y="86.8848">Redis</text><path d="M978,36.3516 C978,26.3516 996,26.3516 996,26.3516 C996,26.3516 1014,26.3516 1014,36.3516 L1014,62.3516 C1014,72.3516 996,72.3516 996,72.3516 C996,72.3516 978,72.3516 978,62.3516 L978,36.3516 " fill="#E1D5E7" style="stroke:#181818;stroke-width:1.5;"/><path d="M978,36.3516 C978,46.3516 996,46.3516 996,46.3516 C996,46.3516 1014,46.3516 1014,36.3516 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="975" y="719.2285">Redis</text><path d="M978,732.3047 C978,722.3047 996,722.3047 996,722.3047 C996,722.3047 1014,722.3047 1014,732.3047 L1014,758.3047 C1014,768.3047 996,768.3047 996,768.3047 C996,768.3047 978,768.3047 978,758.3047 L978,732.3047 " fill="#E1D5E7" style="stroke:#181818;stroke-width:1.5;"/><path d="M978,732.3047 C978,742.3047 996,742.3047 996,742.3047 C996,742.3047 1014,742.3047 1014,732.3047 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><path d="M19,104.9609 L19,146.9609 L146,146.9609 L146,114.9609 L136,104.9609 L19,104.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M136,104.9609 L136,114.9609 L146,114.9609 L136,104.9609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="25" y="123.4561">Participant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="25" y="139.8076">DFSP interactions</text><path d="M141,157.6641 L141,199.6641 L310,199.6641 L310,167.6641 L300,157.6641 L141,157.6641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M300,157.6641 L300,167.6641 L310,167.6641 L300,157.6641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="147" y="176.1592">Consume JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="147" y="192.5107">requests from Kafka topic</text><path d="M258,210.3672 L258,252.3672 L426,252.3672 L426,220.3672 L416,210.3672 L258,210.3672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M416,210.3672 L416,220.3672 L426,220.3672 L416,210.3672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="264" y="228.8623">JSON request decoded &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="264" y="245.2139">processed via handler</text><path d="M397,263.0703 L397,305.0703 L584,305.0703 L584,273.0703 L574,263.0703 L397,263.0703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M574,263.0703 L574,273.0703 L584,273.0703 L574,263.0703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="403" y="281.5654">Expose service functions &amp;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="403" y="297.917">handle database interactions</text><path d="M10,317.7734 L170,317.7734 L170,326.125 L160,336.125 L10,336.125 L10,317.7734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="370.9219" style="stroke:#000000;stroke-width:1.5;" width="965" x="10" y="317.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="115" x="25" y="332.2686">Create Participant</text><polygon fill="#181818" points="213.5,370.8281,223.5,374.8281,213.5,378.8281,217.5,374.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="82.5" x2="219.5" y1="374.8281" y2="374.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="89.5" y="361.7959">1</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="35" x="100.5" y="353.6201">JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="135.5" y="353.6201"> </text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="108" x="100.5" y="369.9717">(participant data)</text><polygon fill="#181818" points="330.5,401.1797,340.5,405.1797,330.5,409.1797,334.5,405.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="225.5" x2="336.5" y1="405.1797" y2="405.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="232.5" y="400.3232">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="243.5" y="400.3232">Invoke handler</text><polygon fill="#181818" points="478.5,431.5313,488.5,435.5313,478.5,439.5313,482.5,435.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="342.5" x2="484.5" y1="435.5313" y2="435.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="349.5" y="430.6748">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="360.5" y="430.6748">Invoke service</text><polygon fill="#181818" points="501.5,478.2344,491.5,482.2344,501.5,486.2344,497.5,482.2344" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="927,478.2344,937,482.2344,927,486.2344,931,482.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495.5" x2="933" y1="482.2344" y2="482.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="507.5" y="469.2021">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="518.5" y="461.0264">Create Participant &amp; return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="518.5" y="477.3779">result (this excludes the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="46" x="661.5" y="477.3779">account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="707.5" y="477.3779">)</text><polygon fill="#181818" points="677.5,508.5859,687.5,512.5859,677.5,516.5859,681.5,512.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="490.5" x2="683.5" y1="512.5859" y2="512.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="497.5" y="507.7295">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="508.5" y="507.7295">Create Participant</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="46" x="616.5" y="507.7295">account</text><polygon fill="#181818" points="700.5,555.2891,690.5,559.2891,700.5,563.2891,696.5,559.2891" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="821,555.2891,831,559.2891,821,563.2891,825,559.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="694.5" x2="827" y1="559.2891" y2="559.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="706.5" y="546.2568">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="717.5" y="538.0811">Create</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="46" x="759.5" y="538.0811">account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="805.5" y="538.0811"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="717.5" y="554.4326">&amp; return result</text><polygon fill="#181818" points="501.5,585.6406,491.5,589.6406,501.5,593.6406,497.5,589.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495.5" x2="688.5" y1="589.6406" y2="589.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="507.5" y="584.7842">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="38" x="518.5" y="584.7842">Return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="46" x="560.5" y="584.7842">account</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="610.5" y="584.7842">create result</text><polygon fill="#181818" points="353.5,615.9922,343.5,619.9922,353.5,623.9922,349.5,619.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="347.5" x2="489.5" y1="619.9922" y2="619.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="359.5" y="615.1357">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="370.5" y="615.1357">Return result</text><polygon fill="#181818" points="236.5,646.3438,226.5,650.3438,236.5,654.3438,232.5,650.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="230.5" x2="341.5" y1="650.3438" y2="650.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="242.5" y="645.4873">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="253.5" y="645.4873">Return result</text><polygon fill="#181818" points="93.5,676.6953,83.5,680.6953,93.5,684.6953,89.5,680.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="87.5" x2="224.5" y1="680.6953" y2="680.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="675.8389">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="117.5" y="675.8389">Return result</text><!--MD5=[085aa60c592f05965d87ad4fb7bf714b]
@startuml

participant "Mojaloop Adapter" as dfsp #B0D5FF
note over dfsp
    Participant
    DFSP interactions
end note

box Central-Ledger #FFFFF9
    participant "Kafka\nConsumer" as cl_consume_kafka
        participant "__api__ / Handler" as cl_handler
        participant "Application Layer\n(domain / service / facade)" as cl_domain

        note over cl_consume_kafka
            Consume JSON
            requests from Kafka topic
        end note
    
        note over cl_handler
            JSON request decoded &
            processed via handler
        end note
    
        note over cl_domain
            Expose service functions &
            handle database interactions
        end note
end box

box Storage #F9FFF9
	Participant "TigerBeetle Client" as tb_client #D5E8D4
	collections "TigerBeetle Cluster" as tb_nodes #D5E8D4
	database "MySQL" as cl_db #DAE8FC
	database "Redis" as redis_cache #E1D5E7
end box

autonumber
group Create Participant
    dfsp -> cl_consume_kafka : //JSON// \n**(participant data)**
    cl_consume_kafka -> cl_handler : Invoke handler
    cl_handler -> cl_domain : Invoke service
    cl_domain <- -> cl_db : Create Participant & return \nresult (this excludes the //account//)
    cl_domain -> tb_client : Create Participant //account//
    tb_client <- -> tb_nodes : Create //account// \n& return result
    tb_client - -> cl_domain : Return //account// create result
    cl_domain - -> cl_handler : Return result
    cl_handler - -> cl_consume_kafka : Return result
    cl_consume_kafka - -> dfsp : Return result
end

@enduml

PlantUML version 1.2022.4(Sat Apr 09 15:29:17 CAT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: ZA
--></g></svg>